<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercicio 7v2</title>
</head>

<body>
    <main>
        <h1>Jogo das Capitais do Brasil sil sil sil..</h1>

        <p>Adivinhe a capital de cada estado e some pontos</p>
        <p>A maior pontuação ganha o jogo</p>

        <input type="button" value="Start" id="idStartGame"><br><br><br>

        <div id="div-jogo">

            <output id="idSaidaPergunta"></output><br><br>
            <output id="idSaidaRodada"></output>

            <form action="" method="post">
                <label for="resposta">Resposta: </label>
                <input type="text" name="nmResposta" id="idResposta"><br><br>
                <input type="button" value="Enviar" id="idEnviaResposta">


            </form>

        </div>

        <div id="div-pontuacao">
            <output id="idPontuacao"></output>
        </div>

    </main>

    <script>
        const estados = [
            { 'Acre': 'Rio Branco' },
            { 'Alagoas': 'Maceió' },
            { 'Amapá': 'Macapá' },
            { 'Amazonas': 'Manaus' },
            { 'Bahia': 'Salvador' },
            { 'Ceará': 'Fortaleza' },
            { 'Distrito Federal': 'Brasília' },
            { 'Espírito Santo': 'Vitória' },
            { 'Goías': 'Goiânia' },
            { 'Maranhão': 'São Luís' },
            { 'Mato Grosso': 'Cuiabá' },
            { 'Mato Grosso do Sul': 'Campo Grande' },
            { 'Minas Gerais': 'Belo Horizonte' },
            { 'Pará': 'Belém' },
            { 'Paraíba': 'João Pessoa' },
            { 'Paraná': 'Curitiba' },
            { 'Pernambuco': 'Recife' },
            { 'Piauí': 'Teresina' },
            { 'Rio de Janeiro': 'Rio de Janeiro' },
            { 'Rio Grande do Norte': 'Natal' },
            { 'Rio Grande do Sul': 'Porto Alegre' },
            { 'Rondônia': 'Porto Velho' },
            { 'Roraíma': 'Boa Vista' },
            { 'Santa Catarina': 'Florianópolis' },
            { 'São Paulo': 'São Paulo' },
            { 'Sergipe': 'Aracaju' },
            { 'Tocantins': 'Palmas' }
        ]


        let arrayJogador = [
            { jogador: "Jogador 1", score: 0 },
            { jogador: "Jogador 2", score: 0 },
            { jogador: "Jogador 3", score: 0 },
            { jogador: "Jogador 4", score: 0 }
        ];

        let sorteio = 0;
        let index = 0;
        let fim = false;

        let btnStartGame = document.getElementById('idStartGame');
        btnStartGame.addEventListener('click', function () {
            document.getElementById('idSaidaRodada').innerText = " "
            if (index < arrayJogador.length) {
                btnStartGame.disabled = true;
                fazPergunta();
            } else {
                index = 0;
                btnStartGame.disabled = true;
                btnEnviaResposta.disabled = false
            }
        })

        function fazPergunta() {
           
            sorteio = parseInt(Math.random() * 28);
            let pergunta = arrayJogador[index].jogador + " Qual a capital de " + Object.keys(estados[sorteio]) + ' ?';
    document.getElementById('idSaidaPergunta').innerText = " "
            document.getElementById('idSaidaPergunta').innerText = pergunta;
            
        }


        let btnEnviaResposta = document.getElementById('idEnviaResposta')
        btnEnviaResposta.addEventListener('click', function () {
            let resposta = document.getElementById('idResposta');
            let respostaCerta = Object.values(estados[sorteio]);

            if (index == 0) {
                if (resposta.value == respostaCerta) {
                    arrayJogador[index].score += 1;

                } else {

                }
            } else if (index == 1) {
                if (resposta.value == respostaCerta) {
                    arrayJogador[index].score += 1;
                } else {

                }
            } else {
                if (resposta.value == respostaCerta) {
                    arrayJogador[index].score += 1;
                } else {

                }
            }

            resposta.value = '';
            index++
            for (let rodada = 0; rodada < 2; rodada++) {
                if (index < arrayJogador.length) {

                    fazPergunta()

                } else {
                    fim = true
                    document.getElementById('idSaidaRodada').innerText = "Aperte Start para proxima Rodada"
                    btnStartGame.disabled = false
                    btnEnviaResposta.disabled = true
                }

            }


        })

    </script>

</body>